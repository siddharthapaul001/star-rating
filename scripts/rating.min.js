var __nthStarRating=1;function _pluckSize(t,i){if(!t)return console.error("Error in size value "+i+": "+t),null;if(!isNaN(+t))return+t;t+="";return"px"===t.slice(-2)?+t.slice(0,-2):null}function _validateColorCode(t){if(!t)return!1;if("number"==typeof t)return console.error("Incorrect color specified"),!1;if(t.startsWith("#")){if(isNaN(parseInt(t.slice(1),16))||4!==t.length&&7!==t.length)return console.error("Incorrect hex color code"),!1}else if(t.startsWith("rgb(")&&!t.replace(/\s/g,"").match(/^rgb\((\d+),(\d+),(\d+)\)$/g))return console.error("Incorrect rgb color code"),!1;return t}function _isFraction(t){return t-(t>>0)}function _getPathString(t){let i,e=.3,n=.3;return n*=.5,i=" l"+.15*t+","+.3*t+" h"+.35*t+" l-"+(e=.5*(.7-.3))*t+","+.3*t+" l"+e*t+","+(.7-.3)*t+" l-"+.5*t+",-"+.25*t+" l-"+.5*t+","+.25*t+" l"+e*t+",-"+(.7-.3)*t+" l-"+e*t+",-"+.3*t+" h"+.35*t+" z"}class SVGElement{constructor(t){this._elem=document.createElementNS("http://www.w3.org/2000/svg",t),this.attrs={}}getNode(){return this._elem}removeNode(){this._elem.parentNode.removeChild(this._elem)}appendChild(t){t instanceof Node?this._elem.appendChild(t):t instanceof SVGElement?this._elem.appendChild(t.getNode()):console.error("Child must be Node or SVGElement")}removeChild(t){t instanceof Node?this._elem.removeChild(t):t instanceof SVGElement?this._elem.removeChild(t.getNode()):console.error("Child must be Node or SVGElement")}setAttributes(t){let i=!1;for(let e in t)this.attrs[e]!==t[e]&&(this._elem.setAttribute(e,t[e]),this.attrs[e]=t[e],i=!0);return i}}class Definition{constructor(t){this.defs=new SVGElement("defs"),this.linearGradient=new SVGElement("linearGradient"),this.strokeLinearGradient=new SVGElement("linearGradient"),this.Rated=new SVGElement("stop"),this.NonRated=new SVGElement("stop"),this.strokeRated=new SVGElement("stop"),this.strokeNonRated=new SVGElement("stop"),this.unique=++__nthStarRating,this.linearGradient.appendChild(this.Rated),this.linearGradient.appendChild(this.NonRated),this.strokeLinearGradient.appendChild(this.strokeRated),this.strokeLinearGradient.appendChild(this.strokeNonRated),this.defs.appendChild(this.linearGradient),this.defs.appendChild(this.strokeLinearGradient),this._config={},t.appendChild(this.defs),t.defs=this}update(t,i,e,n,o,r,s){let a=t-(t>>0),l={x2:"row"==r?"100%":"0%",y2:"column"==r?"100%":"0%"},h={offset:100*a+"%"};a===this._config.ratingFraction&&this._config.ratedFill===i&&this._config.nonratedFill===e&&this._config.ratedStroke===n&&this._config.direction===r&&this._config.flow===s||(this._config.ratingFraction=a,this._config.ratedFill=i,this._config.nonratedFill=e,this._config.ratedStroke=n,this._config.direction=r,this._config.flow=s,this.linearGradient.setAttributes({id:"partial-fill-u"+this.unique,...l}),this.strokeLinearGradient.setAttributes({id:"partial-stroke-u"+this.unique,...l}),"reverse"==s&&([i,e]=[e,i],[n,o]=[o,n]),this.Rated.setAttributes({...h,style:"stop-color:"+i+";stop-opacity:1;"}),this.NonRated.setAttributes({...h,style:"stop-color:"+e+";stop-opacity:1;"}),this.strokeRated.setAttributes({...h,style:"stop-color:"+n+";stop-opacity:1;"}),this.strokeNonRated.setAttributes({...h,style:"stop-color:"+o+";stop-opacity:1;"}))}}class StarRating{constructor(t,i){return t instanceof HTMLElement?(this._elem={},this._config={},this._internalConfig={},this._internalConfig.firstDraw=!0,this._internalConfig.firstValidate=!0,this._todo={},this._elem.parentElement=t,this._config.height=400,this._config.width=400,this._config.TotalStars=5,this._config.rating=void 0,this._config.orientation="left-to-right",this._config.padding=1,this._config.justifyContent="center",this._config.alignItems="center",this._config.strokeWidth=0,this._config.ratedFill="#ff0",this._config.nonratedFill="#ddd",this._config.ratedStroke="none",this._config.nonratedStroke="none",this._internalConfig.direction="row",this._internalConfig.flow="",this._elem.stars=[],!i||i&&this._validateAndSet(i)?(i||this._calculateSide(1,0),void this._reqDraw()):(console.error("Stopping execution"),null)):(console.error("A HTML Element must be provided in the first argument"),null)}_calculateSide(t,i){let e,n;return n="row"===this._internalConfig.direction?this._config.width/this._config.TotalStars:this._config.width,n=(e="column"===this._internalConfig.direction?this._config.height/this._config.TotalStars:this._config.height)<n?e:n,void 0!==i&&(i<0||i>.1*n?(this._config.strokeWidth=0,console.error("Incorrect strokeWidth setting to default")):this._config.strokeWidth=i),void 0!==t&&(t<1||t>.1*n?(this._config.padding=1,console.error("Incorrect padding setting to default")):this._config.padding=t),this._config.strokeWidth>0&&("none"===this._config.ratedStroke&&(console.warn("no color selected for rated stroke setting to black"),this._config.ratedStroke="#000"),"none"===this._config.nonratedStroke&&(console.warn("no color selected for nonrated stroke setting to black"),this._config.nonratedStroke="#000")),!((e=n-2*this._config.padding-2*this._config.strokeWidth)<10)&&(e===this._internalConfig.side&&n===this._internalConfig.sideOut||(this._internalConfig.side=e,this._internalConfig.sideOut=n,this._todo.calcBaseShift=!0,this._todo.calcRelativePath=!0),!0)}_calculateBaseShift(){let t=0,i=0,e=0,n=0,o=this._config.justifyContent,r=this._config.alignItems,s=this._internalConfig.side,a=this._internalConfig.sideOut,l=this._config.height,h=this._config.width,c=this._config.TotalStars;"row"==this._internalConfig.direction?(t=a,"start"==o?e=a/2:"center"==o?e=a/2+(h-a*c)/2:"end"==o?e=h-a*c+a/2:"space-evenly"==o&&(e=(t=h/c)/2),"center"==r?n=(a-s)/2+(l-a)/2:"start"==r?n=(a-s)/2:"end"==r&&(n=l-a)):"column"==this._internalConfig.direction&&(i=a,"start"==o?n=(a-s)/2:"center"==o?n=(a-s)/2:"end"==o?n=l-a*c:"space-evenly"==o&&(n=((i=l/c)-s)/2),"center"==r?e=a/2+(h-a)/2:"start"==r?e=a/2:"end"==r&&(e=h-a/2)),this._internalConfig.baseX!==e&&(this._internalConfig.baseX=e),this._internalConfig.baseY!==n&&(this._internalConfig.baseY=n),this._internalConfig.xShift!==t&&(this._internalConfig.xShift=t),this._internalConfig.yShift!==i&&(this._internalConfig.yShift=i)}_validateAndSet(t){let i,e,n,o,r=!0;return void 0!==t.orientation&&(["left-to-right","right-to-left","top-to-bottom","bottom-to-top"].includes(t.orientation)?i!==this._config.orientation&&(this._config.orientation=t.orientation,t.direction="top-to-bottom"===t.orientation||"bottom-to-top"===t.orientation?"column":"row",this._internalConfig.direction!==t.direction&&(this._internalConfig.direction=t.direction,e=!0,this._todo.calcBaseShift=!0),this._internalConfig.flow="left-to-right"===t.orientation||"top-to-bottom"===t.orientation?"":"reverse"):console.error("Incorrect orientation: "+t.orientation)),void 0!==t.height&&((i=_pluckSize(t.height))>=20?i!==this._config.height&&(this._config.height=i,e=!0,this._todo.calcBaseShift=!0):console.error("Incorrect height: "+t.height)),void 0!==t.width&&((i=_pluckSize(t.width))>=20?i!==this._config.width&&(this._config.width=i,e=!0,this._todo.calcBaseShift=!0):console.error("Incorrect width: "+t.width)),void 0!==t.stars&&((i=+t.stars)>0?i!==this._config.TotalStars&&(this._config.TotalStars=i,e=!0,this._todo.calcBaseShift=!0):(console.error("Incorrect value for stars: "+t.stars),r=!1)),void 0!==t.padding&&((i=_pluckSize(t.padding))&&i!==this._config.padding?(o=i,e=!0,this._todo.calcBaseShift=!0):i||console.error("Incorrect padding: "+t.padding)),void 0!==t.strokeWidth&&((i=_pluckSize(t.strokeWidth))&&i!==this._config.strokeWidth?(n=i,e=!0,this._todo.calcBaseShift=!0):i||console.error("Incorrect strokeWidth: "+t.strokeWidth)),void 0!==t.rating&&((i=+t.rating)>=0&&i<=this._config.TotalStars?i!==this._config.rating&&(this._config.rating=i):console.error("Incorrect rating: "+t.rating)),this._config.rating>this._config.TotalStars&&(this._config.rating=void 0,console.warn("rating > no of stars")),void 0!==t.justifyContent&&(["start","end","center","space-evenly"].includes(t.justifyContent)?t.justifyContent!==this._config.justifyContent&&(this._config.justifyContent=t.justifyContent,this._todo.calcBaseShift=!0):console.error("Incorrect justifyContent: "+t.justifyContent)),void 0!==t.alignItems&&(["start","end","center"].includes(t.alignItems)?t.alignItems!==this._config.alignItems&&(this._config.alignItems=t.alignItems,this._todo.calcBaseShift=!0):console.error("Incorrect alignItems: "+t.alignItems)),void 0!==t.ratedFill&&((i=_validateColorCode(t.ratedFill))?i!==this._config.ratedFill&&(this._config.ratedFill=i):console.error("Incorrect color for ratedFill: "+t.ratedFill)),void 0!==t.nonratedFill&&((i=_validateColorCode(t.nonratedFill))?i!==this._config.nonratedFill&&(this._config.nonratedFill=i):console.error("Incorrect color for ratedFill: "+t.nonratedFill)),void 0!==t.ratedStroke&&((i=_validateColorCode(t.ratedStroke))?i!==this._config.ratedStroke&&(this._config.ratedStroke=i):console.error("Incorrect color for ratedFill: "+t.ratedStroke)),void 0!==t.nonratedStroke&&((i=_validateColorCode(t.nonratedStroke))?i!==this._config.nonratedStroke&&(this._config.nonratedStroke=i):console.error("Incorrect color for ratedFill: "+t.nonratedStroke)),(e||this._internalConfig.firstValidate)&&(this._internalConfig.firstValidate=!1,r=r&&this._calculateSide(o||this._config.padding,n||this._config.strokeWidth)),r}_reqDraw(){this._internalConfig.requestedAnimationFrame=!0,window.requestAnimationFrame(()=>{this._draw()})}_draw(){this._internalConfig.requestedAnimationFrame=!1,"function"==typeof this.onPreDraw?this.onPreDraw():this.onPreDraw&&console.error("onPreDraw must be a function"),this._internalConfig.firstDraw&&(this._elem.svg=new SVGElement("svg"),this._elem.parentElement.appendChild(this._elem.svg.getNode()));let t,i,e,n,o=this._config.rating||0==this._config.rating?this._config.rating:this._config.TotalStars,r=this._elem.stars.length,s=r<this._config.TotalStars?this._config.TotalStars:r;(this._internalConfig.firstDraw||this._todo.calcRelativePath)&&(this._internalConfig.relativePath=_getPathString(this._internalConfig.side)),this._elem.svg.setAttributes({height:this._config.height,width:this._config.width});let a=this._elem.svg.defs;for(_isFraction(o)&&(a||(a=new Definition(this._elem.svg)),a.update(o,this._config.ratedFill,this._config.nonratedFill,this._config.ratedStroke,this._config.nonratedStroke,this._internalConfig.direction,this._internalConfig.flow)),(this._internalConfig.firstDraw||this._todo.calcBaseShift)&&this._calculateBaseShift(),t=0;t<s;t++){if(i="reverse"==this._internalConfig.flow?this._config.TotalStars-t-1:t,t>=r){let t=new SVGElement("path");this._elem.stars.push(t),this._elem.svg.appendChild(t)}else t>=this._config.TotalStars&&this._elem.stars.pop().removeNode();t<this._config.TotalStars&&(_isFraction(o)&&1+(o>>0)==i+1?(e="url(#partial-fill-u"+a.unique+")",n="url(#partial-stroke-u"+a.unique+")"):(e=i<1+(o>>0)?this._config.ratedFill:this._config.nonratedFill,n=i<1+(o>>0)?this._config.ratedStroke:this._config.nonratedStroke),this._elem.stars[t].setAttributes({fill:e,stroke:n,"stroke-width":this._config.strokeWidth+"px",d:"M"+(this._internalConfig.baseX+this._internalConfig.xShift*t)+","+(this._internalConfig.baseY+this._internalConfig.yShift*t)+" "+this._internalConfig.relativePath}))}this._internalConfig.firstDraw=!1,this._todo={},"function"==typeof this.onDraw?this.onDraw():this.onDraw&&console.error("onDraw must be a function")}update(t){if(t){if(!this._validateAndSet(t))return console.error("Stopping execution"),null;this._internalConfig.requestedAnimationFrame||this._reqDraw()}"function"==typeof this.onUpdate?this.onUpdate(this._config):this.onUpdate&&console.error("onUpdate must be a function")}}